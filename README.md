# PopTools - Blender - 蜂鸟游戏资产制作工具集

![Blender Version](https://img.shields.io/badge/Blender-4.2+-blue.svg)
![Python Version](https://img.shields.io/badge/Python-3.11+-green.svg)
![License](https://img.shields.io/badge/License-MIT-yellow.svg)

## 版本更新日志 / Version Changelog

### 3.3.5 (2025)
- **代码优化**: 移除动作命名工具中不必要的图片显示功能
- **内存管理**: 清理预览集合相关代码，优化内存使用
- **界面简化**: 简化动作命名帮助说明界面，保持纯文本显示
- **代码清理**: 移除冗余的图片加载和预览集合管理代码

### 3.3.2 (2025)
- **新增功能**:新增弹出面板,默认快捷键Ctrl+D(动作面板),Ctrl+T(纹理面板)
- **Bug修复**: 修复首次安装腾讯云SDK问题
- **UI优化**: 优化SDK安装成功后的界面显示逻辑，确保重启提示能正确显示
- **用户体验**: 改进安装流程的用户反馈，提供更清晰的操作指引

### 3.3.1 (2025)
- **UI优化**: 优化动画类型按钮UI逻辑，移除冗余文字显示，改为高亮显示当前选中类型
- **新增功能**: 新增"海岛动画"类型，支持特殊命名规则（ani_npc_海岛名_名称）
- **专用面板**: 为海岛动画添加专用输入面板，包含海岛名输入框
- **当前动作显示**: 新增当前动作显示框，实时显示当前活动对象的动作名称
- **界面整合**: 将3DCoat导出前整理功能整合到FBX导出面板顶部，提升工作流程效率
- **预览优化**: 改进动作命名预览功能，支持海岛动画的特殊格式预览
- **输入框管理**: 优化输入框清空逻辑，确保所有相关字段在操作完成后正确清空

### 3.3.0 (2025)
- **新增功能**: 新增动画重命名模块

### 3.2.0 (2025)
- **新增功能**: 新增翻译模块

### 3.1.5 (2025)
- **Bug修复**: 修复纹理压缩后会变暗的问题
- **纹理处理优化**: 改进纹理压缩算法，保持原始亮度和色彩准确性
- **质量提升**: 确保压缩后的纹理保持视觉质量一致性

### 3.1.4 (2025)
- **功能完善**: 完整迁移老版本retex模块中的调整纹理大小功能
- **增强错误处理**: 添加图像数据检查和重新加载机制，提供详细错误信息
- **自动保存功能**: 调整后的纹理自动保存到Small文件夹，便于管理
- **避免重复处理**: 使用智能算法避免同一图像被重复处理
- **详细统计反馈**: 提供完整的操作结果统计，包括成功、跳过和错误数量

### 3.1.3 (2025)
- **智能识别优化**: 海岛配方道具智能重命名功能支持更灵活的内容识别
- **命名格式改进**: 支持数字在字母前面的命名格式（如"1b"、"3_balloon"等）
- **前缀统一**: 所有重命名的道具自动添加"mesh_item_"前缀，规范化命名
- **兼容性增强**: 保持对原有字母在前格式的完全兼容（如"b1"、"balloon_3"等）

### 3.1.2 (2025)
- **功能改进**: 优化建筑重命名功能，实现自动递增序号，从01开始自动排序
- **界面简化**: 移除手动序号选择控件，提升操作效率
- **智能命名**: 当检测到重复名称时自动跳过并递增到下一个可用序号

### 3.1.1 (2025)
- **Bug修复**: 修复OBJ导出轴向不能设置为"Y" "-Z"的问题
- **默认设置**: 将Unity专用导出选项设置为默认导出配置
- **兼容性**: 优化Unity工作流程的导出体验

### 3.1.0 (2025)
- **UI优化**: 优化建筑重命名功能界面，移除冗余标签，提升界面整洁度
- **新增功能**: 添加烘焙高低模自动命名功能，支持智能识别和批量重命名
- **面板排序**: 重新调整UI面板显示顺序，优化用户体验
- **按钮界面**: 将建筑重命名中的下拉选择改为直观的按钮操作
- **代码优化**: 改进错误处理和用户反馈机制
- **性能提升**: 优化大批量操作的处理速度

### 3.0.0 (2025)
- **架构重构**: 采用全新的简化架构，扁平化模块结构
- **统一管理**: 集中化属性和偏好设置管理
- **模块化设计**: 各功能模块独立，支持单独启用/禁用
- **兼容性**: 全面支持Blender 4.2+版本
## 概述 / Overview

PopTools是一个专为Blender 4.2+设计的蜂鸟常用游戏资产制作工具集，旨在简化和加速3D游戏资产的创建、处理和导出流程。该插件采用模块化设计，支持多种游戏引擎的资产导出需求，特别针对Unity、3DCoat进行了优化。

## 主要特性 / Key Features

- 🎯 **模块化设计**: 各功能模块独立，可按需启用/禁用
- 🚀 **批量处理**: 支持大量资产的批量操作和导出
- 🎮 **多引擎支持**: 针对主流游戏引擎优化的导出预设
- 🔧 **智能重命名**: 自动识别和重命名各类游戏资产
- 📦 **一键导出**: 简化复杂的导出流程
- 🎨 **纹理管理**: 智能纹理处理和批量操作

## 系统要求 / System Requirements

- **Blender版本**: 4.2.0 或更高版本
- **Python版本**: 3.11+ (Blender内置)
- **操作系统**: Windows 10/11, macOS 10.15+, Linux Ubuntu 20.04+
- **硬件要求**: 建议8GB RAM，支持OpenGL 3.3的显卡

## 安装指南 / Installation Guide

### 方法一：手动安装
1. 下载最新版本的PopTools插件包
2. 解压到Blender插件目录：
   - **Windows**: `%APPDATA%\Blender Foundation\Blender\4.2\scripts\addons\`
   - **macOS**: `~/Library/Application Support/Blender/4.2/scripts/addons/`
   - **Linux**: `~/.config/blender/4.2/scripts/addons/`
3. 启动Blender，进入 `编辑 > 偏好设置 > 插件`
4. 搜索"PopTools"并启用插件
5. 点击"保存偏好设置"

### 方法二：ZIP安装
1. 在Blender中进入 `编辑 > 偏好设置 > 插件`
2. 点击"安装"按钮
3. 选择下载的PopTools.zip文件
4. 启用插件并保存偏好设置

## 功能模块详解 / Detailed Module Functions

### 1. 纹理管理 (Texture Management)

**功能概述**: 提供全面的纹理处理和管理工具，支持批量操作和智能重命名。

**主要功能**:
- **智能对象重命名**: 根据预设规则自动重命名场景中的对象
- **纹理批量重命名**: 支持多种命名模式的批量纹理重命名
- **纹理大小调整**: 批量调整纹理分辨率，优化性能
- **自定义体型管理**: 针对角色模型的体型变体管理
- **建筑重命名功能**: 专门针对建筑资产的命名规范化
- **烘焙高低模自动命名**: 自动识别并重命名烘焙用的高低模对象

**使用步骤**:
1. 选择需要处理的对象或纹理
2. 在纹理管理面板中选择相应的操作类型
3. 配置命名规则或处理参数
4. 点击执行按钮开始批量处理
5. 查看操作日志确认处理结果

### 2. 3DCoat导出前整理 (3DCoat Pre-Export Cleanup)

**功能概述**: 为3DCoat工作流程优化模型，确保导出质量。

**主要功能**:
- **一键材质清理**: 自动移除不必要的材质和材质槽
- **重复UV检查**: 检测并报告重复的UV映射
- **网格验证**: 验证网格完整性和拓扑结构
- **法线重置**: 重置自定义法线数据

**使用步骤**:
1. 选择要导出到3DCoat的模型
2. 点击"材质清理"按钮移除多余材质
3. 运行"UV检查"确保UV映射正确
4. 执行"网格验证"检查模型完整性
5. 导出到3DCoat进行进一步处理

### 3. FBX导出工具 (FBX Export Tools)

**功能概述**: 专业的多格式导出工具，支持主流游戏引擎的导出预设。

**主要功能**:
- **多格式支持**: FBX、OBJ、GLTF格式导出
- **游戏引擎预设**: Unity、Unreal Engine、Godot专用预设
- **批量导出**: 支持场景中多个对象的批量导出
- **路径管理**: 智能路径管理和文件组织
- **自定义参数**: 详细的导出参数配置

**引擎预设说明**:
- **Unity预设**: 优化坐标系、缩放比例和材质导出
- **Unreal预设**: 适配UE的FBX导入要求
- **Godot预设**: 针对Godot引擎的格式优化

**使用步骤**:
1. 选择要导出的对象
2. 在FBX导出面板中选择目标引擎预设
3. 配置导出路径和文件名
4. 调整导出参数（可选）
5. 点击"导出"开始导出过程
6. 检查导出日志确认成功

### 4. 配方道具OBJ导出 (Recipe Props OBJ Export)

**功能概述**: 专门用于游戏道具和配方物品的OBJ格式导出。

**主要功能**:
- **批量OBJ导出**: 支持多个道具的批量导出
- **命名规范化**: 自动应用游戏道具的命名规范
- **材质处理**: 优化材质信息的导出
- **文件组织**: 自动创建合理的文件夹结构

**使用步骤**:
1. 准备好要导出的道具模型
2. 在配方道具导出面板中选择对象
3. 设置导出路径和命名规则
4. 配置材质导出选项
5. 执行批量导出操作

### 5. 顶点到骨骼烘焙 (Vertex to Bone Baker)

**功能概述**: 高级的顶点权重烘焙工具，用于角色绑定和动画制作。

**主要功能**:
- **顶点到骨骼绑定**: 自动计算顶点到骨骼的权重
- **权重烘焙**: 将复杂的权重信息烘焙到顶点
- **空物体管理**: 管理绑定过程中的辅助空物体
- **自动化流程**: 一键完成整个烘焙流程
- **质量控制**: 验证烘焙结果的质量

**使用步骤**:
1. 准备好绑定的角色模型和骨架
2. 在顶点烘焙面板中选择源对象
3. 配置烘焙参数和质量设置
4. 点击"开始烘焙"执行自动流程
5. 检查烘焙结果并进行必要调整
6. 保存烘焙后的模型

## 高级配置 / Advanced Configuration

### 插件偏好设置

在Blender偏好设置中，PopTools提供了丰富的配置选项：

1. **模块管理**: 启用/禁用特定功能模块
2. **默认路径**: 设置各类导出的默认路径
3. **命名规则**: 自定义各种重命名操作的规则
4. **性能设置**: 调整批量操作的性能参数
5. **日志级别**: 设置操作日志的详细程度

### 自定义预设

用户可以创建和保存自定义的导出预设：

1. 配置所需的导出参数
2. 点击"保存预设"按钮
3. 输入预设名称和描述
4. 预设将保存在用户配置文件中
5. 可在预设列表中快速调用

## 工作流程示例 / Workflow Examples

### 游戏角色导出流程

1. **模型准备**:
   - 使用纹理管理工具重命名角色部件
   - 运行3DCoat整理工具清理材质

2. **权重处理**:
   - 使用顶点到骨骼烘焙工具处理权重
   - 验证绑定质量

3. **导出到引擎**:
   - 选择对应的游戏引擎预设
   - 使用FBX导出工具导出最终资产

### 建筑资产批量处理

1. **批量重命名**:
   - 选择所有建筑模型
   - 使用建筑重命名功能统一命名

2. **材质优化**:
   - 运行纹理大小调整工具
   - 清理不必要的材质

3. **批量导出**:
   - 使用配方道具导出工具批量导出OBJ
   - 组织文件到项目文件夹

## 故障排除 / Troubleshooting

### 常见问题

**Q: 插件安装后在侧边栏找不到PopTools面板？**
A: 确保插件已正确启用并**重启blender**，按N键打开侧边栏，检查是否有PopTools标签页。

**Q: 导出的FBX文件在Unity中显示异常？**
A: 确保使用了Unity预设，检查坐标系和缩放设置。

**Q: 批量重命名操作失败？**
A: 检查对象是否被锁定，确保有足够的操作权限。

**Q: 顶点烘焙过程中出现错误？**
A: 确保模型和骨架的拓扑结构正确，检查权重组设置。

### 性能优化建议

1. **大批量操作**: 分批处理大量对象，避免内存溢出
2. **纹理处理**: 在处理高分辨率纹理前先备份原文件
3. **导出设置**: 根据目标平台调整导出质量设置
4. **内存管理**: 定期保存项目，清理不必要的数据

## 技术支持 / Technical Support

### 报告问题

如果遇到问题，请提供以下信息：
- Blender版本号
- PopTools版本号
- 操作系统信息
- 详细的错误描述
- 重现步骤

### 功能请求

欢迎提交功能请求和改进建议，请详细描述：
- 期望的功能
- 使用场景
- 预期效果


## 贡献指南 / Contributing

欢迎社区贡献代码和改进建议：

1. Fork本项目
2. 创建功能分支
3. 提交更改
4. 创建Pull Request


---

**PopTools** | 让Blender游戏资产制作更简单
